<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" > <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta property="og:title" content="pthreads - Share Nothing, Do Everything :)" />
<meta property="og:url" content="http://pthreads.org" />
<meta property="og:type" content="website" />
<meta property="og:image" content="images/pthreads-logo.png" />
<title>Share Nothing, Do Everything :)</title>	
<meta name="robots" content="index, follow"> 
<link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz' rel='stylesheet' type='text/css'>
<link href="css/reset.css" rel="stylesheet">
<link href="css/stylesheet.css" rel="stylesheet">
<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<link type="text/css" rel="stylesheet" href="css/shCoreDefault.css"/>
<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
<!--[if lt IE 7 ]>
	<script src="js/dd_belatedpng.js"></script>
	<script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<meta name="description" content="pthreads.org - Share Nothing, Do Everything :)" />
<meta name="keywords" content="thread php, multi thread php, php workers, asynchronous php" />
<link rel="canonical" href="http://pthreads.org/" />
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34980052-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  SyntaxHighlighter.all();
</script>
</head> 
<body id="index" >
	<!-- site header -->
	<header>
		<div class="header">
			<div class="wrapper"> 
				<!-- logo/sitename -->
				<a href="http://pthreads.org/" id="logo" ><img src="images/pthreads-logo.png" alt="pthreads.org" border="0px"/></a>
			</div>
		</div>
  </header>	
	<div class="wrapper clearfix">
		<!-- page content -->
		<article>
			<section>
				<!-- title and content -->
				<h1><span style="text-decoration: line-through;">Share Nothing</span>, Do Everything :)</h1>
				<p>
	PHP has an awesome amount of extensions and features, but was conceived at a time when Web Servers were far less powerful than they are today. Almost every web server ( and mobile phone ! ) has multiple cores, if not multiple CPU's with multiple cores. PHP does not take advantage of this very well at all. While PHP is very fast to develop and express your ideas, when developing enterprising web applications we often find ourselves looking to other fully fledged languages and frameworks to write backend, or data-centric web applications because PHP isn't able to take advantage of the hardware we have at our disposal. Being able to thread in PHP makes it a real candidate for enterprising applications, and it'll make your personal home page be able to do things it simply didn't have the time to do before.</p>
<h2>
	The Basics</h2>
<p>
	pthreads is an Object Orientated API that allows user-land multi-threading in PHP. It includes all the tools you need to create multi-threaded applications targeted at the Web or the Console. PHP applications can create, read, write and synchronize with Threads and Workers (Threaded objects).</p>
<h2>
	A Thread Object</h2>
<p>
	The user can implement a thread by extending the Thread declaration provided by pthreads. Any members can be written and read by any context with a reference to the Thread, any context can also execute any public and protected methods. The run method of the implementation is executed in a separate thread when the start method of the implementation is called from the context ( that's Thread or Process ) that created it. Only the context that creates a thread can start and join with it.</p>
<h2>
	A Worker Object</h2>
<p>
	A Worker Thread has a persistent state, and will be available from the call to start until the object goes out of scope, or is explicitly shutdown. Any context with a reference can pass objects of type Threaded to the Worker which will be executed by the Worker in a separate Thread. The run method of a Worker is executed before any objects on the stack, such that it can initialize resources that the Threaded tasks to come may need.</p>
<h2>
	Synchronization</h2>
<p>
	All of the objects that pthreads creates have built in synchronization in the form of ::wait and ::notify. Calling ::wait on an object will cause the context to wait for another context to call ::notify on the same object. This allows for powerful synchronization between Threaded Objects in PHP.</p>
<h2>
	Wait, Threaded Objects ?</h2>
<p>
	A Thread or Worker can be thought of, and should be used as a Threaded stdClass: A Thread and Worker behave in the same way in any context with a reference.</p>
<p>
	Any objects that are intended for use in the multi-threaded parts of your application should extend the Threaded, Thread or Worker declaration, which means they must implement run but may not ever be executed; it will often be the case that Objects being used in a multi-threaded environment are intended for execution. Doing so means any Threaded context (Thread or Worker) with a reference can read, write and execute the members of the Threaded Object before, during, and after execution.</p>
<h2>
	Data Storage</h2>
<p>
	As a rule of thumb, any data type that can be serialized can be used as a member of a Threaded object, it can be read and written from any context with a reference to the Threaded Object. Not every type of data is stored serially, basic types are stored in their true form. Complex types, Arrays, and Objects that are not Threaded are stored serially; they can be read and written to the Threaded Object from any context with a reference.</p>
<p>
	With the exception of Threaded Objects any reference used to set a member of a Threaded Object is separated from the reference in the Threaded Object; the same data can be read directly from the Threaded Object at any time by any context with a reference to the Threaded Object.</p>
<h3>
	Resources</h3>
<p>
	The extensions and functionality that define resources in PHP are completely unprepared for this kind of environment; pthreads makes provisions for resources to be shared among contexts, however most types of resource WILL have problems. Most of the time, resources should NOT be shared among contexts, and when they are they should be basic types like streams and sockets.</p>
<p>
	Officially, resources remain unsupported.</p>
<h4>
	A Work in Progress</h4>
<p>
	pthreads was and is an experiment with pretty good results. Any of its limitations or features may change at any time; that is the nature of experimentation. It's limitations - often imposed by the implementation - exist for good reason. The aim of pthreads is to provide a useable solution to multi-tasking in PHP at any level, in the environment which pthreads executes, some restrictions and limitations are necessary in order to provide a stable environment.</p>
				
				<!-- page footer -->
				<div class="footer">
					<p>Published on <time datetime="2013-01-09" pubdate>January 9th, 2013</time></p>
				</div>
			</section>
			
		</article>
		
		<!-- include the sidebar template -->
<aside id="sidebar">
	<!-- wrap each sidebar section like this -->
	<div class="section">
		<h2>Highlights</h2>
<ul> 
<li>Easy to use Threading API for PHP5.3+</li> 
<li>Execute <span style="font-weight: bold;">anything</span> asynchronously</li> 
<li>Easy Synchronization Included</li> 
<li>SAPI Support</li> 
<li>A world of possibilities ...</li> 
</ul>
<h2>Technical Features</h2>
<ul>
<li>Posix Threading</li>
<li>Synchronization</li>
<li>Worker Threads</li>
<li>Thread Pools</li>
</ul>
<h2>Requirements</h2>
<ul>
<li>PHP5.3+ on x64 or x86</li>
<li>ZTS Enabled ( Thread Safety )</li>
<li>Posix Threads implementation<span style="font-weight:bold;">*</span></li>
<li style="list-style-type:none;">
<small><span style="font-weight:bold;">*</span>Windows support thanks to <a href="http://sources.redhat.com/pthreads-win32">pthread-w32</a></small>
</li>
</ul>
<h2>Documentation</h2>
<ul>
  <li><a href="http://docs.php.net/manual/en/book.pthreads">See the PHP Manual</a></li>
</ul>
<h2>Implementation</h2>
<ul>
  <li><a href="https://gist.github.com/krakjoe/6437782">Introduction</a></li>
  <li><a href="tutorials/start.html">Getting Started</a></li>
  <li><a href="tutorials/recycle.html">Recycling Contexts</a></li>
</ul>
<h2>Downloads</h2>
<ul>
 <li><a href="http://pecl.php.net/package/pthreads" target="_blank">PECL</a></li>
 <li><a href="https://github.com/krakjoe/pthreads" target="_blank">Github</a></li>
 <li><a href="http://windows.php.net/downloads/pecl/releases/pthreads/" target="_blank">Windows Binaries</a></li>
</ul>	
</div>
</aside>	
</div>

<!-- include the footer template -->

	<!-- site footer -->
	<footer class="clearfix" >
		
			 	<div class="wrapper">
			<div class="left"><a href="http://pthreads.org/" >pthreads.org</a>&nbsp;&copy;&nbsp;2013</div>
			<div class="right"><a href="http://php.net/"><img src="images/php-powered.png" alt="PHP5 Powered" target="_blank"></a></div>
		</div>
	</footer>
	
</body>
</html>
